/*! Custom Sidebars - v2.1.08
 * https://premium.wpmudev.org/project/custom-sidebars-pro/
 * Copyright (c) 2016; * Licensed GPLv2+ */
jQuery(function(){var e=jQuery(document),t=jQuery("#widgets-right"),i=!1,n=function n(e,t){var i=jQuery(t).closest(".widget"),n=i.find(".csb-clone-button"),s=i.find(".widget-control-actions .widget-control-save"),a=i.find(".widget-control-actions .spinner"),d=i.find(".widget-control-save");i.data("_csb_cloning")||(a.insertBefore(s).css({"float":"left"}),n.insertBefore(s).click(l),d.click(g),i.data("_csb_cloning",!0))},s=function s(e,n){if(i)return!1;for(var s=jQuery(n).closest(".widget"),d=s.find("input.csb-clone-group"),o=parseInt(d.val()),c=null;;){if(c=t.find('input.csb-clone-group[value="'+o+'"]'),!c.length||1===c.length&&c[0]===d[0])break;o+=1}d.val(o),a()},a=function a(){for(var e=jQuery("#widgets-left input.csb-clone-group"),i=parseInt(e.first().val());t.find('input.csb-clone-group[value="'+i+'"]').length;)i+=1;e.val(i)},d=function d(){var e=jQuery(this).closest(".widget"),i=e.find("input.csb-clone-group").val(),n=t.find('input.csb-clone-group[value="'+i+'"]').closest(".widget");isNaN(i)||1>i||(n.addClass("csb-marker"),e.removeClass("csb-marker"))},o=function o(){var e=jQuery(".widget.csb-marker");e.removeClass("csb-marker")},c=function c(){var e=t.find("input.csb-clone-group");e.each(function(){var e=jQuery(this).val(),i=t.find('input.csb-clone-group[value="'+e+'"]').closest(".widget"),n=i.find(".widget-title h4, .widget-title h3"),s="add";(isNaN(e)||1>e)&&(s="remove"),2>i.length&&(s="remove"),n.removeClass("csb-group group-active").find(".btn-clone-group").remove(),i.removeAttr("data-csb-icon"),"add"===s&&(n.addClass("csb-group group-active").prepend('<i class="dashicons dashicons-admin-links btn-clone-group"></i> '),n.find(".btn-clone-group").hover(d,o).click(r))})},r=function r(e){var t=jQuery(this).closest(".widget"),i=t.find(".widget-title h4"),n=i.find(".btn-clone-group"),s=t.find("input.csb-clone-group");return e.preventDefault(),e.stopPropagation(),i.hasClass("group-active")?(i.removeClass("group-active"),n.removeClass("dashicons-admin-links").addClass("dashicons-editor-unlink"),s.data("group",s.val()),s.val(0),o()):(i.addClass("group-active"),n.addClass("dashicons-admin-links").removeClass("dashicons-editor-unlink"),s.val(s.data("group")),d.call(this,[e])),!1},l=function l(e){var t=jQuery(this).closest(".widget"),n=jQuery("#widgets-left"),s=jQuery(".widgets-chooser"),d=jQuery("#wpbody-content");e.preventDefault(),i=!0;var o=t.find("input.csb-clone-state").val();"new"===o&&window.wpWidgets.save(t,0,0,0),window.wpWidgets.clearWidgetSelection(),s.slideUp(200,function(){s.hide(),d.append(this)});var c=t.find("input.id_base").val(),r=n.find('input.id_base[value="'+c+'"]'),l=r.closest(".widget");l.addClass("widget-in-question");var u=t.find("input.csb-clone-group").val(),g=(l.find(".widget-control-actions"),l.find("input.csb-clone-group")),p=l.find("input.csb-clone-state");g.val(u),p.val("empty");var v=t.closest(".widgets-sortables"),f=v.attr("id");return s.find(".widgets-chooser-selected").removeClass("widgets-chooser-selected"),s.find("li").each(function(){var e=jQuery(this);f===e.data("sidebarId")&&e.addClass("widgets-chooser-selected").focus()}),window.wpWidgets.addWidget(s),window.wpWidgets.clearWidgetSelection(),a(),i=!1,!1},u=function u(e){var t=e.find("input.csb-clone-state");"empty"===t.val()&&(e.addClass("wpmui-loading"),window.wpWidgets.save(e,0,1,0))},g=function g(){var e=jQuery(this).closest(".widget"),i=e.find("input.csb-clone-group").val(),n=t.find('input.csb-clone-group[value="'+i+'"]').closest(".widget").not(e);n.each(function(){var e=jQuery(this);e.find("input.csb-clone-state"),e.addClass("wpmui-loading").attr("data-reload",!0)})},p=function p(){var e=t.find(".widget[data-reload]");e.each(function(){var e=jQuery(this),t=e.find("input.csb-clone-state");t.val("empty"),e.removeAttr("data-reload"),window.wpWidgets.save(e,0,0,0)})},v=function v(e,t,i,n){var s="string"==typeof i.data?i.data:"",a=s.match(/^.*&action=([^&]+).*$/),d=s.match(/^.*&widget-id=([^&]+).*$/),o=a&&2===a.length?a[1]:"",r=d&&2===d.length?d[1]:"";if(r.length){var l=jQuery('.widget input.widget-id[value="'+r+'"]'),g=l.closest(".widget");switch(o){case"save-widget":g.removeClass("wpmui-loading"),n.length?n.match(/^deleted:/)?window.setTimeout(c,400):(c(),p(g)):u(g);break;default:}}};t.find(".widget").each(n),e.on("widget-added",n),e.on("widget-added",s),e.ajaxSuccess(v),c(),a()});